"use strict";(self.webpackChunkaduasis_docs=self.webpackChunkaduasis_docs||[]).push([[8668],{9054:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>t});var a=r(5893),i=r(1151);const o={},s="\u2699\ufe0f Open API",c={id:"documentacion/herramientas/open-api-generator",title:"\u2699\ufe0f Open API",description:"Ir al repositorio en Github (Es necesario tener permisos)",source:"@site/doc/documentacion/herramientas/open-api-generator.md",sourceDirName:"documentacion/herramientas",slug:"/documentacion/herramientas/open-api-generator",permalink:"/docs/documentacion/herramientas/open-api-generator",draft:!1,unlisted:!1,editUrl:"https://github.com/aduasis-logistica/aduasis-logistica.github.io/tree/main/doc/documentacion/herramientas/open-api-generator.md",tags:[],version:"current",frontMatter:{},sidebar:"documentacionSidebar",previous:{title:"Aduasis Tools",permalink:"/docs/documentacion/herramientas/aduasis-tools"},next:{title:"\ud83c\udf92 Cursos",permalink:"/docs/documentacion/cursos"}},l={},t=[{value:"\xbfC\xf3mo funciona Open API generator?",id:"c\xf3mo-funciona-open-api-generator",level:2},{value:"\ud83d\udd28 Compilaci\xf3n",id:"-compilaci\xf3n",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"\ufe0f-open-api",children:"\u2699\ufe0f Open API"}),"\n",(0,a.jsx)(n.admonition,{title:"Enlace a repositorio",type:"info",children:(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://github.com/aduasis-logistica/app-library-generation",children:"Ir al repositorio en Github (Es necesario tener permisos)"})})}),"\n",(0,a.jsx)(n.p,{children:"Es una aplicaci\xf3n que genera bibliotecas para el proyecto de Angular de cierta API, basado en el\r\nprincipio de las API REST de code on demand:"}),"\n",(0,a.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/wlUW9hm_ajQ?si=8B9ZN2U8fNgA-9_S",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),"\n",(0,a.jsx)(n.h2,{id:"c\xf3mo-funciona-open-api-generator",children:"\xbfC\xf3mo funciona Open API generator?"}),"\n",(0,a.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/wtIVxvJFT2k?si=3p1SoQbpgaYjRtkf",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),"\n",(0,a.jsx)(n.h2,{id:"-compilaci\xf3n",children:"\ud83d\udd28 Compilaci\xf3n"}),"\n",(0,a.jsx)(n.p,{children:"Primero es necesario el schema de una API Restfull, esta se obtiene desde el swagger de cualquier microservicio."}),"\n",(0,a.jsx)(n.p,{children:"Accede al swagger del api:"}),"\n",(0,a.jsx)("img",{src:"https://i.imgur.com/lxMZCoo.png"}),"\n",(0,a.jsx)(n.p,{children:"Da clic en el enlace para ver swagger.json"}),"\n",(0,a.jsx)("img",{src:"https://i.imgur.com/gYaInLG.png"}),"\n",(0,a.jsx)(n.p,{children:"Copie el contenido y dirijase a la carpeta del proyecto del open api generator"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"    >  cd C:\\SINLS\\app-library-generator\\\n"})}),"\n",(0,a.jsx)(n.p,{children:"dentro de este proyecto abra el archivo docker-compose.yaml"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'services:\r\n  openapi-service:\r\n    build: .\r\n    \r\n    volumes:\r\n    - ./src:/src\r\n    command: >\r\n      sh -c "rm -r -f /src/dist/\r\n      && /usr/local/bin/docker-entrypoint.sh generate \\\r\n      -g typescript-angular \\\r\n      -i /src/config/swagger.json \\\r\n      -c /src/config/seguridad-api.yaml \\\r\n      -o /src/dist/\r\n      "\n'})}),"\n",(0,a.jsx)(n.p,{children:"Notese que se menciona un archivo llamado swagger.json y otro llamado con terminaci\xf3n .yaml\r\ndirijase al archivo swagger.json y pegue el contenido del esquema previamente copiado.\r\nUna vez hecho esto cambie el nombre del archivo  /src/config/seguridad-api.yaml dependiendo del microservicio que desea subir la libreria de code on demand."}),"\n",(0,a.jsx)(n.p,{children:"Ahora, el archivo seguridad-api.yaml (o el microservicio que sea) tiene la configuracion referente\r\na el nombre del repositorio npm en donde se va a subir esta libreria, solo basta con incrementar la version\r\nnpmVersion a una mas reciente, por ejemplo:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiModulePrefix\t: "Seguridad"\r\nnpmVersion: 0.0.12\r\nnpmName: "aduasis-seguridad-api"\r\nfileNaming\t: "kebab-case"\r\nmodelFileSuffix: ".model"\r\nngVersion : 17.0.8\r\nuseSingleRequestParameter\t: true\n'})}),"\n",(0,a.jsx)(n.p,{children:"La version de 0.0.12 a 0.0.13"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiModulePrefix\t: "Seguridad"\r\nnpmVersion: 0.0.13\r\nnpmName: "aduasis-seguridad-api"\r\nfileNaming\t: "kebab-case"\r\nmodelFileSuffix: ".model"\r\nngVersion : 17.0.8\r\nuseSingleRequestParameter\t: true\n'})}),"\n",(0,a.jsx)(n.p,{children:"una vez hecho esto dentro de la ruta raiz del proyecto del open api generator ejecute este comando teniendo docker abierto."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"docker-compose up --build\r\n\n"})}),"\n",(0,a.jsx)(n.p,{children:"vera que se agrego la siguiente carpeta con el compilado generado:"}),"\n",(0,a.jsx)("img",{src:"https://i.imgur.com/40rek5d.png"}),"\n",(0,a.jsx)(n.p,{children:"Dirijase a el contenido desde la consola"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"cd ./src/dist\n"})}),"\n",(0,a.jsx)(n.admonition,{title:"Version",type:"warning",children:(0,a.jsx)(n.p,{children:"La version de node debe ser la misma que se usa en el proyecto de portal SPA"})}),"\n",(0,a.jsx)(n.p,{children:"Ahora ejecute este comando para bajar las librerias externas:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm install\n"})}),"\n",(0,a.jsx)(n.p,{children:"Genere el compilado con este comando nuevamente:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm run build\n"})}),"\n",(0,a.jsx)(n.p,{children:"Como reusltado se generara esta carpeta dist:"}),"\n",(0,a.jsx)("img",{src:"https://i.imgur.com/yHtBLZd.png"}),"\n",(0,a.jsx)(n.p,{children:"accedemos a ella y publicamos el paquete en npm (Hay que tener acceso al repositorio NPM)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"cd ./dist/\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm publish\n"})}),"\n",(0,a.jsx)(n.p,{children:"Una vez completado aparecera lo siguiente:"}),"\n",(0,a.jsx)("img",{src:"https://i.imgur.com/1tYGILa.png"}),"\n",(0,a.jsx)(n.p,{children:"Basta con comprobar la version en NPM"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"https://www.npmjs.com/package/aduasis-seguridad-api",children:"https://www.npmjs.com/package/aduasis-seguridad-api"})}),"\n",(0,a.jsx)(n.p,{children:"Si existe esta nueva versi\xf3n, hay que actualizarla en el proyecto de SPA en el archivo package.json"}),"\n",(0,a.jsx)("img",{src:"https://i.imgur.com/rtaSXvl.png"}),"\n",(0,a.jsx)(n.p,{children:"Una vez actualizada la libreria en el proyecto de angular, solo ejecute el siguiente comando para ver reflejado todos los nuevos metodos agregados para consultar la API:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"npm install\n"})})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},1151:(e,n,r)=>{r.d(n,{Z:()=>c,a:()=>s});var a=r(7294);const i={},o=a.createContext(i);function s(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);