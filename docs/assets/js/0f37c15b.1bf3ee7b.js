"use strict";(self.webpackChunkaduasis_docs=self.webpackChunkaduasis_docs||[]).push([[6393],{9869:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var r=i(5893),a=i(1151);const o={},s="\ud83e\udd16 Registro 001",c={id:"documentacion/productos/registro001",title:"\ud83e\udd16 Registro 001",description:"Ir al repositorio en Github (Es necesario tener permisos)",source:"@site/doc/documentacion/productos/5-registro001.md",sourceDirName:"documentacion/productos",slug:"/documentacion/productos/registro001",permalink:"/docs/documentacion/productos/registro001",draft:!1,unlisted:!1,editUrl:"https://github.com/aduasis-logistica/aduasis-logistica.github.io/tree/main/doc/documentacion/productos/5-registro001.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"documentacionSidebar",previous:{title:"\ud83c\udf10 Microservicios portal",permalink:"/docs/documentacion/productos/microservicios-portal"},next:{title:"\ud83d\udcbb Doda Pita",permalink:"/docs/documentacion/productos/doda-pita"}},l={},d=[{value:"\u2139\ufe0f \xbfQu\xe9 es?",id:"\u2139\ufe0f-qu\xe9-es",level:2},{value:"Instalaci\xf3n del registro 001 de pedimentos",id:"instalaci\xf3n-del-registro-001-de-pedimentos",level:2},{value:"Configurar variable de entorno",id:"configurar-variable-de-entorno",level:3},{value:"Archivo de configuraci\xf3n",id:"archivo-de-configuraci\xf3n",level:3},{value:"Instalaci\xf3n del servicio de Windows",id:"instalaci\xf3n-del-servicio-de-windows",level:2},{value:"Diagrama de clases",id:"diagrama-de-clases",level:2},{value:"Diagrama de secuencia",id:"diagrama-de-secuencia",level:2},{value:"Comandos para trabajar el proyecto en python",id:"comandos-para-trabajar-el-proyecto-en-python",level:2},{value:"Posibles excepciones / errores",id:"posibles-excepciones--errores",level:2},{value:"\ud83d\udcc3 Manejo del entorno virtual en python",id:"-manejo-del-entorno-virtual-en-python",level:3},{value:"\ud83d\udd28 Compilaci\xf3n",id:"-compilaci\xf3n",level:2}];function t(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"-registro-001",children:"\ud83e\udd16 Registro 001"}),"\n",(0,r.jsx)(n.admonition,{title:"Enlace a repositorio",type:"info",children:(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/aduasis-logistica/app-registro-001-scrapping",children:"Ir al repositorio en Github (Es necesario tener permisos)"})})}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)(n.strong,{children:"\ud83e\uddea Stack tecnol\xf3gico"})}),(0,r.jsx)(n.p,{children:"Lenguajes de programaci\xf3n:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Python 3.8.2"}),"\n"]}),(0,r.jsx)(n.p,{children:"IDEs/Editores recomendados:"}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Visualstudio code"}),"\n"]})]}),"\n",(0,r.jsx)(n.h2,{id:"\u2139\ufe0f-qu\xe9-es",children:"\u2139\ufe0f \xbfQu\xe9 es?"}),"\n",(0,r.jsx)(n.p,{children:"El objetivo principal del programa es la extracci\xf3n de informaci\xf3n por medio de la herramienta de scraping apuntando directamente al sistema de operaci\xf3n integral aduanera ubicada en el siguiente enlace:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://aplicacionesc.mat.sat.gob.mx/SOIANET/oia_consultarap_cep.aspx",children:"https://aplicacionesc.mat.sat.gob.mx/SOIANET/oia_consultarap_cep.aspx"})}),"\n",(0,r.jsx)(n.p,{children:"El SOIA es el sistema en donde se consulta el estado que guardan las operaciones de comercio exterior realizadas dentro del proceso de despacho aduanero."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"P\xe1gina de SOIA:"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.imgur.com/0aVbH3M.png",alt:"https://i.imgur.com/0aVbH3M.png"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"En donde contiene un formulario con lo siguientes campos:"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"1. Aduana"})})}),"\n",(0,r.jsx)(n.p,{children:"Es la combinaci\xf3n de 2 valores, n\xfamero de aduana y su secci\xf3n."}),"\n",(0,r.jsx)(n.p,{children:"En el caso de Nuevo Laredo 24 y su secci\xf3n es 0. Dando como resultado 240."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"2. A\xf1o del pedimento"})})}),"\n",(0,r.jsx)(n.p,{children:"A qu\xe9 a\xf1o se hizo el pedimento, para este ejemplo ser\xe1 2021."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"3. Patente"})})}),"\n",(0,r.jsx)(n.p,{children:"Persona f\xedsica autorizada para verificar las operaciones, es un valor de 4 d\xedgitos, para este ejemplo ser\xe1 3694."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"4. Documento"})})}),"\n",(0,r.jsx)(n.p,{children:"Identificador del pedimento, en este caso 1001403."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Ejemplo de uso:"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.imgur.com/OpaH6pb.png",alt:"https://i.imgur.com/OpaH6pb.png"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Dando como resultado todos los estados que se tienen:"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.imgur.com/LIRie6m.png",alt:"https://i.imgur.com/LIRie6m.png"})}),"\n",(0,r.jsx)(n.h2,{id:"instalaci\xf3n-del-registro-001-de-pedimentos",children:"Instalaci\xf3n del registro 001 de pedimentos"}),"\n",(0,r.jsx)(n.p,{children:"Para que la aplicaci\xf3n funcione correctamente hay que considerar los siguientes pasos:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Configurar variable de entorno"}),"\n",(0,r.jsx)(n.li,{children:"Archivo de configuraci\xf3n"}),"\n",(0,r.jsx)(n.li,{children:"Stored procedures"}),"\n",(0,r.jsx)(n.li,{children:"Ejecutable .exe"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"configurar-variable-de-entorno",children:"Configurar variable de entorno"}),"\n",(0,r.jsx)(n.p,{children:"Cree una variable de entorno bajo el nombre aduasis_registro001_pedimentos y de valor coloque la ruta de la carpeta en donde se va a encontrar el archivo de configuraci\xf3n (config.yaml) y la carpeta para el guardado de logs, ejemplo: C:\\SISNL\\Registro001\\ (Recuerde siempre terminar con un slash invertido '\\')."}),"\n",(0,r.jsx)(n.h3,{id:"archivo-de-configuraci\xf3n",children:"Archivo de configuraci\xf3n"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Contenido del archivo de configuraci\xf3n"})}),"\n",(0,r.jsx)(n.p,{children:"Al abrir el archivo se encontrar\xe1 la siguiente estructura:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'\r\n#Parametros de conexion al gestor de base de datos de SQL SERVER\r\nconnection:\r\n  driver: "SQL Server Native Client 11.0"\r\n  server: "localhost"\r\n  user: "sa"\r\n  password: "sa"\r\n  database: "aduasism3"\r\n\r\nmotor:\r\n  #Tiempo maximo de espera para responder una accion\r\n  segundosDeTimeout: 25 \r\n  #Para evitar bloqueos por parte de VUCEM\r\n  minutosDeReposo: 1 \r\n  #Cantidad de veces que una peticion debe repetirse en caso de fallar\r\n  reintentos: 4\r\n  #Cantidad de referencias a digitalizar por oleada\r\n  cantidadDeReferencias: 30\r\n\r\nlicencia:\r\n  jwt: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGllbnRlSWQiOiIwMDI4IiwiYWR1YW5hcyI6WyIxNjAiLCIiXX0.EdopaV1UF1VoiWXHX_wIyMJ7jB0WFXNdspXKqSGW57I"\r\n  clienteId: "0028"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"instalaci\xf3n-del-servicio-de-windows",children:"Instalaci\xf3n del servicio de Windows"}),"\n",(0,r.jsx)(n.p,{children:"La aplicaci\xf3n se es ejecutada en manera de servicio de Windows, por lo que ser\xe1 necesario instalarla desde la terminal, dicha terminal debe abrirse con permisos de administrador para evitar cualquier tipo de problema con los permisos."}),"\n",(0,r.jsx)(n.p,{children:'Una vez abierta la terminal, ser\xe1 necesario acceder a la ruta en donde se encuentra el ejecutable "main.exe".'}),"\n",(0,r.jsx)(n.p,{children:"Ejemplo:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"> cd C:/Reg001_pedimentos/\n"})}),"\n",(0,r.jsx)(n.p,{children:"Una vez dentro de la carpeta en consola, se ejecutar\xe1 el siguiente comando si es la primera vez que se agrega el servicio:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"main.exe install\n"})}),"\n",(0,r.jsx)(n.p,{children:"Si se tratase de una actualizaci\xf3n, lo primero que se tendr\xeda que hacer es parar el servicio con el comando stop y posteriormente aplicar el comando update:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"main.exe stop\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"main.exe update\n"})}),"\n",(0,r.jsx)(n.p,{children:"Una vez instalada se podr\xe1 iniciar el servicio con el siguiente comando:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"main.exe start\n"})}),"\n",(0,r.jsx)(n.p,{children:"Al concluir el procedimiento anterior podr\xe1 visualizar en el apartado de servicios del administrador de tareas, el servicio reg001 pedimentos:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.imgur.com/mIN3vN8.png",alt:"img"})}),"\n",(0,r.jsx)(n.h2,{id:"diagrama-de-clases",children:"Diagrama de clases"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.imgur.com/0C2shru.png",alt:"img"})}),"\n",(0,r.jsx)(n.h2,{id:"diagrama-de-secuencia",children:"Diagrama de secuencia"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:"https://i.imgur.com/igvUMHJ.png",alt:"https://i.imgur.com/igvUMHJ.png"})}),"\n",(0,r.jsx)(n.h2,{id:"comandos-para-trabajar-el-proyecto-en-python",children:"Comandos para trabajar el proyecto en python"}),"\n",(0,r.jsx)(n.p,{children:"Instala el servicio"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"python main.py install\n"})}),"\n",(0,r.jsx)(n.p,{children:"Actualiza el servicio"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"python main.py update\n"})}),"\n",(0,r.jsx)(n.p,{children:"Debuguea el servicio en consola"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"python main.py debug\n"})}),"\n",(0,r.jsx)(n.p,{children:"Genera el compilado para instalar en cualquier computadora"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"pyinstaller -F --hidden-import=win32timezone  --icon=app.ico main.py\n"})}),"\n",(0,r.jsx)(n.h2,{id:"posibles-excepciones--errores",children:"Posibles excepciones / errores"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Del sistema"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Error al comprobar la licencia"}),"\n",(0,r.jsx)(n.li,{children:"Se ha producido un error al intentar inicializar el programa, error en la conexi\xf3n"}),"\n",(0,r.jsx)(n.li,{children:"Error en el n\xfacleo del programa, reintentando el proceso"}),"\n",(0,r.jsx)(n.li,{children:"Error al leer el archivo config.json"}),"\n",(0,r.jsx)(n.li,{children:"Error al ejecutar el SP up_registro001_pedimentosOp"}),"\n",(0,r.jsxs)(n.li,{children:["Error al ejecutar el query ",(0,r.jsx)(n.em,{children:(0,r.jsx)(n.strong,{children:"x"})})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Externos al sistema"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tiempo de espera terinado"}),"\n",(0,r.jsx)(n.li,{children:"Error en la petici\xf3n"}),"\n",(0,r.jsx)(n.li,{children:"Reintentando conectar a la p\xe1gina"}),"\n",(0,r.jsx)(n.li,{children:"Sin respuesta del servidor"}),"\n",(0,r.jsx)(n.li,{children:"No se encontr\xf3 informaci\xf3n relacionada con los par\xe1metros proporcionados, verifique los datos y/o el a\xf1o del pedimento"}),"\n",(0,r.jsx)(n.li,{children:"Error al acceder al grdPeidmentos"}),"\n",(0,r.jsx)(n.li,{children:"El comando buscar no da resultados"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-manejo-del-entorno-virtual-en-python",children:"\ud83d\udcc3 Manejo del entorno virtual en python"}),"\n",(0,r.jsx)(n.p,{children:"Como buena pr\xe1ctica y para separar el proyecto de otros proyectos hechos en python dentro de la m\xe1quina que est\xe1s utilizando\r\nse recomienda el uso de entornos virtuales."}),"\n",(0,r.jsx)(n.p,{children:"Para crear un entorno virtual primero abre una consola de windows y dirigete a la ubicaci\xf3n de la ruta ra\xedz del proyecto:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-commandline",children:"cd  C:\\proyectos\\app-digitalizador\\\n"})}),"\n",(0,r.jsx)(n.p,{children:"Posteriormente instala la utilidad para crear entornos virtuales en python"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-commandline",children:"pip install virtualenv\n"})}),"\n",(0,r.jsx)(n.p,{children:"Posteriormente ejecuta el siguiente comando para crear un entorno virtual"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-commandline",children:"virtualenv .env\n"})}),"\n",(0,r.jsx)(n.p,{children:"Ahora es necesario que actives el entorno virtual, basta con ejecutar el siguiente comando en la consola (dentro del path de la ruta ra\xedz del proyecto)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-commandline",children:".env\\Scripts\\activate\n"})}),"\n",(0,r.jsx)(n.p,{children:"Por \xfaltimo ejecuta el sigueinte comando para bajar todas las librerias utilizadas en el proyecto dentro de tu entorno virtual:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-commandline",children:"pip install -r requirements.txt\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"pyinstaller build -F --hidden-import=win32timezone --icon=icon.ico setup.py\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-compilaci\xf3n",children:"\ud83d\udd28 Compilaci\xf3n"}),"\n",(0,r.jsx)(n.p,{children:"Para crear el archivo binario de la aplicaci\xf3n basta con ejecutar el sigueinte comando en consola:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-commandline",children:".env\\\\Scripts\\\\pyinstaller build -F --hidden-import=win32timezone --icon=icon.ico setup.py\n"})})]})}function p(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(t,{...e})}):t(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>c,a:()=>s});var r=i(7294);const a={},o=r.createContext(a);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);