"use strict";(self.webpackChunkaduasis_docs=self.webpackChunkaduasis_docs||[]).push([[9118],{9439:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>d,metadata:()=>s,toc:()=>t});var a=n(5893),r=n(1151);const d={sidebar_position:6},o="Instalaci\xf3n",s={id:"digitalizador/instalacion",title:"Instalaci\xf3n",description:"Requisitos previos",source:"@site/doc/digitalizador/instalacion.md",sourceDirName:"digitalizador",slug:"/digitalizador/instalacion",permalink:"/docs/digitalizador/instalacion",draft:!1,unlisted:!1,editUrl:"https://github.com/aduasis-logistica/aduasis-logistica.github.io/tree/main/doc/digitalizador/instalacion.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"digitalizadorSidebar",previous:{title:"Documentos",permalink:"/docs/digitalizador/documentos"},next:{title:"Bit\xe1cora (digitalizador_bitacora)",permalink:"/docs/digitalizador/tablas/digitalizadorBitacora"}},l={},t=[{value:"Requisitos previos",id:"requisitos-previos",level:2},{value:"1.  Queries",id:"1--queries",level:2},{value:"Digitalizaci\xf3n",id:"digitalizaci\xf3n",level:3},{value:"Digitalizador",id:"digitalizador",level:3},{value:"2. Archivo de configuraci\xf3n",id:"2-archivo-de-configuraci\xf3n",level:2},{value:"Conexi\xf3n a la base de datos",id:"conexi\xf3n-a-la-base-de-datos",level:3},{value:"Digitalizadores",id:"digitalizadores",level:3},{value:"Par\xe1metros de motor de busqueda",id:"par\xe1metros-de-motor-de-busqueda",level:3},{value:"Logs",id:"logs",level:3},{value:"3. Variables de entorno",id:"3-variables-de-entorno",level:2},{value:"4. Instalaci\xf3n",id:"4-instalaci\xf3n",level:2},{value:"Servicio de windows",id:"servicio-de-windows",level:3},{value:"Aplicaci\xf3n de consola",id:"aplicaci\xf3n-de-consola",level:3},{value:"Diagrama de despliegue",id:"diagrama-de-despliegue",level:3}];function c(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.h1,{id:"instalaci\xf3n",children:"Instalaci\xf3n"}),"\n",(0,a.jsx)(i.h2,{id:"requisitos-previos",children:"Requisitos previos"}),"\n",(0,a.jsx)(i.p,{children:"Para que el digitalizador funcione de forma correcta es necesario los siguientes elementos:"}),"\n",(0,a.jsxs)(i.ol,{children:["\n",(0,a.jsx)(i.li,{children:"Ejecutable setup.exe."}),"\n",(0,a.jsx)(i.li,{children:"Archivo de configuraci\xf3n con extensi\xf3n YAML."}),"\n",(0,a.jsx)(i.li,{children:"Queries de definici\xf3n de tablas, funciones y stored procedures."}),"\n",(0,a.jsxs)(i.li,{children:[(0,a.jsx)(i.a,{href:"https://www.oracle.com/mx/java/technologies/javase/javase8-archive-downloads.html",children:"JDK8"}),"."]}),"\n",(0,a.jsx)(i.li,{children:"Carpeta jasperstarter con sus librerias y reportes Jasper."}),"\n"]}),"\n",(0,a.jsx)(i.h2,{id:"1--queries",children:"1.  Queries"}),"\n",(0,a.jsx)(i.h3,{id:"digitalizaci\xf3n",children:"Digitalizaci\xf3n"}),"\n",(0,a.jsx)(i.p,{children:"Tablas:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"dig_archivo"}),"\n",(0,a.jsx)(i.li,{children:"dig_documento"}),"\n",(0,a.jsx)(i.li,{children:"dig_aplicacion"}),"\n",(0,a.jsx)(i.li,{children:"dig_modulo"}),"\n",(0,a.jsx)(i.li,{children:"dig_relacion"}),"\n",(0,a.jsx)(i.li,{children:"dig_digitalizacion"}),"\n",(0,a.jsx)(i.li,{children:"dig_digitalizacion_parametro"}),"\n",(0,a.jsx)(i.li,{children:"dig_digitalizacion_cliente_parametro"}),"\n",(0,a.jsx)(i.li,{children:"dig_modulo_documento"}),"\n",(0,a.jsx)(i.li,{children:"wdigitalizacion_cliente"}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"Stored Procedures:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"up_digArchivoMaxSecuencial"}),"\n",(0,a.jsx)(i.li,{children:"up_digRutaArchivo"}),"\n",(0,a.jsx)(i.li,{children:"up_digNombreArchivo"}),"\n"]}),"\n",(0,a.jsx)(i.h3,{id:"digitalizador",children:"Digitalizador"}),"\n",(0,a.jsx)(i.p,{children:"Tablas:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"digitalizador_errores"}),"\n",(0,a.jsx)(i.li,{children:"digitalizador_bitacora"}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"Funciones:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"function obtener_parametro"}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"Stored Procedures:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"up_digitalizadorMaster"}),"\n",(0,a.jsx)(i.li,{children:"up_digitalizadorGuardado"}),"\n",(0,a.jsx)(i.li,{children:"up_reportarDigitalizadorError"}),"\n",(0,a.jsx)(i.li,{children:"up_digitalizadorDesencadenador"}),"\n",(0,a.jsx)(i.li,{children:"up_digitalizadorBitacoraBarrido"}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"Stored Procedures de cada documento:"}),"\n",(0,a.jsxs)(i.table,{children:[(0,a.jsx)(i.thead,{children:(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.th,{children:"Nombre"}),(0,a.jsx)(i.th,{children:"Documento ID"}),(0,a.jsx)(i.th,{children:"SP"})]})}),(0,a.jsxs)(i.tbody,{children:[(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:"Acuse Cove"}),(0,a.jsx)(i.td,{children:"72"}),(0,a.jsx)(i.td,{children:"up_digitalizadorAcuseCovePDF"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:"Acuse eDocument"}),(0,a.jsx)(i.td,{children:"73"}),(0,a.jsx)(i.td,{children:"up_digitalizadorAcuseEDocumentPDF"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:"XML Pedimento"}),(0,a.jsx)(i.td,{children:"76"}),(0,a.jsx)(i.td,{children:"up_digitalizadorPedimentoCompletoXML"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:"XML Cove"}),(0,a.jsx)(i.td,{children:"77"}),(0,a.jsx)(i.td,{children:"up_digitalizadorCoveXML"})]}),(0,a.jsxs)(i.tr,{children:[(0,a.jsx)(i.td,{children:"Cove PDF"}),(0,a.jsx)(i.td,{children:"25"}),(0,a.jsx)(i.td,{children:"up_digitalizadorCovePDF.sql, up_reporteCoveMercanciasModelosPDF ,up_reporteCoveMercanciasPDF , up_reporteCovePDF"})]})]})]}),"\n",(0,a.jsx)(i.h2,{id:"2-archivo-de-configuraci\xf3n",children:"2. Archivo de configuraci\xf3n"}),"\n",(0,a.jsx)(i.p,{children:"Dentro del archivo de configuraci\xf3n config.yaml se encontrar\xe1n agrupados todas los posibles par\xe1metros para que el digitalizador pueda funcionar, desde los m\xe1s\r\ngenerales a los m\xe1s especificos."}),"\n",(0,a.jsx)(i.admonition,{type:"tip",children:(0,a.jsx)(i.p,{children:"Asegurate de por lo menos tener bien configurada la ruta en donde se van a almacenar los logs para as\xed poder debuguear otros posibles errores."})}),"\n",(0,a.jsx)(i.admonition,{title:"Rutas",type:"caution",children:(0,a.jsx)(i.p,{children:"Al establecer la ruta de una carpeta en el archivo de configuraci\xf3n, estas siempre deben de ser diagonales invertidas '\\' y siempre deben de ser dos: '\\\\'."})}),"\n",(0,a.jsx)(i.h3,{id:"conexi\xf3n-a-la-base-de-datos",children:"Conexi\xf3n a la base de datos"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-yaml",children:'connection:\r\n  driver: "SQL Server Native Client 11.0"\r\n  server: "localhost"\r\n  user: "sa"\r\n  password: "sa"\r\n  database: "aduasism3"\n'})}),"\n",(0,a.jsx)(i.h3,{id:"digitalizadores",children:"Digitalizadores"}),"\n",(0,a.jsx)(i.p,{children:"Define si un digitalizador est\xe1 encendido, o si descencadena la digitalizaci\xf3n de otros documentos, por ejemplo, un pedimento completo tiene coves definidos en su XML por lo que si se deja habilitada la opci\xf3n de descencadenador va a insertar todos esos coves en la bit\xe1cora para que se digitalicen coves XML."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-yaml",children:"digitalizadores:\r\n  pedimentoCompleto: \r\n    estatus: on\r\n    desencadenador: on\r\n  coveXML: \r\n    estatus: on\r\n    desencadenador: on\r\n  covePDF: on\r\n  acuseEDocument: on\r\n  pedimentoPartida: on\r\n  acuseCove: on\n"})}),"\n",(0,a.jsx)(i.h3,{id:"par\xe1metros-de-motor-de-busqueda",children:"Par\xe1metros de motor de busqueda"}),"\n",(0,a.jsx)(i.p,{children:"Se recomienda dejarlo tal cual como esta."}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-yaml",children:"motor:\r\n  #(Tiempo maximo de espera para responder una peticion)\r\n  segundosDeTimeout: 20 \r\n  #(Para evitar bloqueos por parte de VUCEM)\r\n  minutosDeReposo: 1 \r\n   #(Cantidad de veces que una peticion debe repetirse en caso de fallar)\r\n  reintentos: 4\r\n  #(Cantidad de referencias a digitalizar por oleada)\r\n  cantidadDeReferencias: 30\n"})}),"\n",(0,a.jsx)(i.h3,{id:"logs",children:"Logs"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-yaml",children:'logs:\r\n  #Habilita y deshabilita el mostrado de logs en aplicaci\xf3n de consola(parametro cmd).\r\n  cmd: on\r\n  #Habilita y dehabilita el mostrado de logs en formato de texto.\r\n  txt: on\r\n  #Establece la carpeta en donde se van a almacenar los logs por fecha.\r\n  path: "C:\\\\Aduasis\\\\Proyectos\\\\digitalizador\\\\logs\\\\"\n'})}),"\n",(0,a.jsx)(i.h2,{id:"3-variables-de-entorno",children:"3. Variables de entorno"}),"\n",(0,a.jsx)(i.p,{children:"Es necesario definir en las variables de entorno la ruta en donde se encuentra el ejecutable del digitalizador, pues es aqui la ra\xedz de donde van a partir las distintas rutas que va a necesitar el digitalizador, tales como:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"Carpeta de log de archivos"}),"\n",(0,a.jsx)(i.li,{children:"Carpeta jasperstartes"}),"\n",(0,a.jsx)(i.li,{children:"Archivo de configuraci\xf3n config.yaml"}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:'El nombre de la variable debe ser "aduasis_digitalizador"'}),"\n",(0,a.jsx)(i.p,{children:(0,a.jsx)(i.img,{src:"https://i.imgur.com/HDGW1TU.png",alt:"Variables de entorno"})}),"\n",(0,a.jsx)(i.p,{children:"Si y solo si el digitalizador va a trabajar con reportes de tipo jasper ser\xe1 necesario establecer la ruta en donde se encuentra la Java HOME en las siguientes variables:"}),"\n",(0,a.jsxs)(i.ul,{children:["\n",(0,a.jsx)(i.li,{children:"JAVA_HOME"}),"\n",(0,a.jsx)(i.li,{children:"JDK_HOME"}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"Tal como muestra la siguiente imagen:"}),"\n",(0,a.jsx)("img",{src:"/img/digitalizador/variables-entorno.png"}),"\n",(0,a.jsx)(i.h2,{id:"4-instalaci\xf3n",children:"4. Instalaci\xf3n"}),"\n",(0,a.jsx)(i.h3,{id:"servicio-de-windows",children:"Servicio de windows"}),"\n",(0,a.jsxs)(i.ol,{children:["\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsx)(i.p,{children:"Abrir la consola de Windows con permisos de administrador."}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsx)(i.p,{children:"Desde la consola dirigirse a la carpeta en donde se encuentra el ejecutable \u201csetup.exe\u201d.\r\nPara ello utiliza el comando \u201ccd\u201d seguido de la ruta f\xedsica de la carpeta en donde se encuentra el ejecutable."}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsx)(i.p,{children:"Colocar el comando \u201csetup.exe install\u201d en la consola."}),"\n"]}),"\n",(0,a.jsxs)(i.li,{children:["\n",(0,a.jsx)(i.p,{children:"Colocar el comando \u201csetup.exe start\u201d seguido de la ruta completa del archivo de configuraci\xf3n con extensi\xf3n YAML."}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(i.p,{children:"Si todo se encuentra en orden se podr\xe1 visualizar el siguiente estatus en el administrador de tareas \u2013 servicios."}),"\n",(0,a.jsx)(i.h3,{id:"aplicaci\xf3n-de-consola",children:"Aplicaci\xf3n de consola"}),"\n",(0,a.jsx)(i.p,{children:'Ser\xe1 necesario ubicar el ejecutable "setup.exe" en una carpeta en donde tambi\xe9n se encuentre el archivo "config.yaml".\r\nUna vez hecho lo anterior, basta con abrir el ejecutable.'}),"\n",(0,a.jsx)(i.h3,{id:"diagrama-de-despliegue",children:"Diagrama de despliegue"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-kroki",metastring:"type=plantuml",children:'@startuml\r\nactor usuario\r\nrectangle "Configuraciones" as configuracion{\r\n    file  config.yaml[\r\n        <b>config.yaml</b>\r\n        ----\r\n        SQLSV String connection\r\n        ....\r\n        Digitalizadores\r\n    ]\r\n    node variablesDeEntorno[\r\n        <b>Variables de entorno</b>\r\n        ----\r\n        JAVA_HOME\r\n        ....\r\n        JDK_HOME\r\n        ....\r\n        aduasis_digitalizador\r\n    ]\r\n}\r\nagent digitalizador.exe as digitalizador\r\ndatabase aduasism3\r\nfolder  "Directorio" as directorio\r\nfolder  "Carpeta de logs" as directorioLogs\r\ncomponent "Digitalizadores concretos" <<Hilo / Thread>> as digitalizadoresConcretos\r\nfile "Documentos concretos" as documentosConcretos\r\nfile "Log.txt" as log\r\nusuario --\x3e configuracion: Edita\r\nusuario --\x3e digitalizador : Instala/Ejecuta\r\ndigitalizador --\x3e configuracion : Lee\r\ndigitalizador .. aduasism3 : Se conecta a\r\ndigitalizador --\x3e digitalizadoresConcretos : Tiene\r\ndigitalizadoresConcretos --\x3e documentosConcretos : Generan\r\ndocumentosConcretos --\x3e directorio : Guardados en\r\ndigitalizadoresConcretos --\x3e log : Generan\r\nlog --\x3e directorioLogs : Guardados en\r\n@enduml\n'})})]})}function u(e={}){const{wrapper:i}={...(0,r.a)(),...e.components};return i?(0,a.jsx)(i,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},1151:(e,i,n)=>{n.d(i,{Z:()=>s,a:()=>o});var a=n(7294);const r={},d=a.createContext(r);function o(e){const i=a.useContext(d);return a.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function s(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(d.Provider,{value:i},e.children)}}}]);